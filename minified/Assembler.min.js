using(AV.Utilities).within(AV.App.Display,function(d){AVObjMacro("registerEntity",null,function(a,c){d.Assembler.registerAssemblerEntity(a,c.name,c.attributes)},function(a,c){this.super(a.name,c[1])});d.Assembler=AVObj.extend({initStaticObject:!0}).prop({regList:{},registerAssemblerEntity:function(a,c,d){this.regList[c]={component:a,attributes:d};console.log("registered")},buildLayer:function(a){var c=Node.create("layer"),m=/cm-([^\s]*)/;console.log(a,this.regList);var l=function(c,a){for(var h=0,
n=c.length;h<n;h++){var b=c[h];switch(b.type){case d.Parser.ELEMENT:for(var e={},k=[],f=0,p=b.attributes.length;f<p;f++)for(var g in b.attributes[f])(result=g.match(m))?k.push(Node._componentList[result[1]].create(b.attributes[f][g])):e[g]=b.attributes[f][g];this.regList[b.name]?(console.log("Construct Special",b.name),a.push(this.regList[b.name].component.create(a,k))):(console.log("construct general node"),e=Node.create(b.name,k,e),a.push(e),b.children&&l(b.children,e));break;case d.Parser.TEXT:b=
document.createTextNode(b.text),a._element.appendChild(b);default:case d.Parser.UNKNOWN:}}}.bind(this);l(a,c);return c}});d.NewEntity=Node.extend({registerEntity:{name:"k",attributes:["firstName","lastName"]}}).prop({init:function(a,c,d,l){}})});
