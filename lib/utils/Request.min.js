"use strict";XMLHttpRequest.prototype.addListener=function(event,functionName,scope,options){if(options){this["__"+functionName+"_bindValue"]=scope?scope[functionName].bind(scope,options):scope[functionName]}else{this["__"+functionName+"_bindValue"]=scope?scope[functionName].bind(scope):scope[functionName]}this.addEventListener(event,this["__"+functionName+"_bindValue"],false)};XMLHttpRequest.prototype.removeListener=function(event,functionName){this.removeEventListener(event,this["__"+functionName+"_bindValue"],false);delete this["__"+functionName+"_bindValue"]};var Request=AVObj.extend();Request.properties={init:function(method,url,asynchronous,finishFunction,data){this.request=new XMLHttpRequest;this.method=method;this.url=url;this.asynchronous=asynchronous;this.finishFunction=finishFunction;this.data=data;if(this.request==null){console.error("Browser does not support XMLHTTPRequest.")}else if(typeof url==="string"){this.request.addListener("error","transferError",this);if(method==="POST"){this.sendPostRequest()}else if(method==="GET"){this.sendGetRequest()}else{console.error('no method defined. Please set to "POST" or "GET".')}}else{console.error("URL is not defined or is not a string.")}},transferError:function(){console.error("An error has occurred while transferring the data.")},sendGetRequest:function(){this.request.open(this.method,this.url+"?"+this.convertToString(),this.asynchronous);if(!this.asynchronous){this.request.send(null);this.finishFunction({responseText:this.request.responseText})}else{this.request.addListener("load","fireFunction",this);this.request.send(null)}},sendPostRequest:function(){this.request.open(this.method,this.url,this.asynchronous);if(!this.asynchronous){this.request.send(this.convertToForm());this.finishFunction({responseText:this.request.responseText})}else{this.request.addListener("load","fireFunction",this);this.request.send(this.convertToForm())}},fireFunction:function(e){this.request.removeListener("error","transferError");this.request.removeListener("load","fireFunction");this.finishFunction(e.currentTarget)},kill:function(){this.request.removeListener("error","transferError");this.request.removeListener("load","fireFunction");this.request.abort()},convertToString:function(){var newString="";if(typeof this.data=="object"){var firstAnd=false;for(var element in this.data){if(firstAnd){newString+="&"+element+"="+encodeURIComponent(this.data[element])}else{firstAnd=true;newString+=element+"="+encodeURIComponent(this.data[element])}}}else if(typeof this.data=="string")newString=this.data;return newString},convertToForm:function(){var object;if(typeof this.data=="object"&&typeof FormData!="undefined"){if(this.data instanceof FormData===false){object=new FormData;for(var element in this.data){object.append(element,this.data[element])}}else{object=this.data}}else object=this.convertToString();if(typeof object=="string")this.request.setRequestHeader("Content-type","application/x-www-form-urlencoded");return object}};